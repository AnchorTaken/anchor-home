<template>
  <div v-if="!openCurtains" class="fixed top-0 left-0 z-20 flex h-full w-full transition-all duration-750" :class="!curtainsOpen ? 'backdrop-blur-md' : 'backdrop-blur-0'" @click="openCurtainsAction()">
    <div class="absolute top-0 left-0 h-full bg-black opacity-50 backdrop-blur-2xl transition-all duration-700 delay-3s" :class="transitionComplete ? 'w-1/2' : 'w-0'"/>
    <div class="absolute top-0 right-0 h-full bg-black opacity-50 transition-all duration-700 delay-4s" :class="transitionComplete ? 'w-1/2' : 'w-0'"/>
    <div class="relative z-10 m-auto">
      <div class="flex flex-col space-y-10">
        <svg class="-ml-10 w-1/2" viewBox="0 0 301 3" fill="none" xmlns="http://www.w3.org/2000/svg" :class="curtainsOpen && 'animate__animated animate__fadeOutDown animate__faster'">
          <path d="M0.462078 2.68801C0.286078 2.68801 0.286078 2.49001 0.462078 2.09401C0.682078 1.65401 0.946078 1.21401 1.25408 0.774015C1.56208 0.334014 1.78208 0.114014 1.91408 0.114014H14.9821C15.2461 0.114014 15.2681 0.334014 15.0481 0.774015C14.8721 1.21401 14.6081 1.65401 14.2561 2.09401C13.9481 2.49001 13.6841 2.68801 13.4641 2.68801H0.462078Z" fill="white"/>
          <path d="M41.2712 2.68801C41.0952 2.68801 41.0952 2.49001 41.2712 2.09401C41.4912 1.65401 41.7552 1.21401 42.0632 0.774015C42.3712 0.334014 42.5912 0.114014 42.7232 0.114014H55.7912C56.0552 0.114014 56.0772 0.334014 55.8572 0.774015C55.6812 1.21401 55.4172 1.65401 55.0652 2.09401C54.7572 2.49001 54.4932 2.68801 54.2732 2.68801H41.2712Z" fill="white"/>
          <path d="M82.0804 2.68801C81.9044 2.68801 81.9044 2.49001 82.0804 2.09401C82.3004 1.65401 82.5644 1.21401 82.8724 0.774015C83.1804 0.334014 83.4004 0.114014 83.5324 0.114014H96.6004C96.8644 0.114014 96.8864 0.334014 96.6664 0.774015C96.4904 1.21401 96.2264 1.65401 95.8744 2.09401C95.5664 2.49001 95.3024 2.68801 95.0824 2.68801H82.0804Z" fill="white"/>
          <path d="M122.89 2.68801C122.714 2.68801 122.714 2.49001 122.89 2.09401C123.11 1.65401 123.374 1.21401 123.682 0.774015C123.99 0.334014 124.209 0.114014 124.341 0.114014H137.41C137.674 0.114014 137.695 0.334014 137.475 0.774015C137.299 1.21401 137.036 1.65401 136.684 2.09401C136.376 2.49001 136.111 2.68801 135.891 2.68801H122.89Z" fill="white"/>
          <path d="M163.699 2.68801C163.523 2.68801 163.523 2.49001 163.699 2.09401C163.919 1.65401 164.183 1.21401 164.491 0.774015C164.799 0.334014 165.019 0.114014 165.151 0.114014H178.219C178.483 0.114014 178.505 0.334014 178.285 0.774015C178.109 1.21401 177.845 1.65401 177.493 2.09401C177.185 2.49001 176.921 2.68801 176.701 2.68801H163.699Z" fill="white"/>
          <path d="M204.508 2.68801C204.332 2.68801 204.332 2.49001 204.508 2.09401C204.728 1.65401 204.992 1.21401 205.3 0.774015C205.608 0.334014 205.828 0.114014 205.96 0.114014H219.028C219.292 0.114014 219.314 0.334014 219.094 0.774015C218.918 1.21401 218.654 1.65401 218.302 2.09401C217.994 2.49001 217.73 2.68801 217.51 2.68801H204.508Z" fill="white"/>
          <path d="M245.317 2.68801C245.141 2.68801 245.141 2.49001 245.317 2.09401C245.537 1.65401 245.801 1.21401 246.109 0.774015C246.417 0.334014 246.637 0.114014 246.769 0.114014H259.837C260.101 0.114014 260.123 0.334014 259.903 0.774015C259.727 1.21401 259.463 1.65401 259.111 2.09401C258.803 2.49001 258.539 2.68801 258.319 2.68801H245.317Z" fill="white"/>
          <path d="M286.126 2.68801C285.95 2.68801 285.95 2.49001 286.126 2.09401C286.346 1.65401 286.61 1.21401 286.918 0.774015C287.226 0.334014 287.446 0.114014 287.578 0.114014H300.646C300.91 0.114014 300.932 0.334014 300.712 0.774015C300.536 1.21401 300.272 1.65401 299.92 2.09401C299.612 2.49001 299.348 2.68801 299.128 2.68801H286.126Z" fill="white"/>
        </svg>

        <div v-if="transitionComplete" class="relative h-fit">
          <svg class="m-auto  overflow-hidden transition-all duration-200" viewBox="0 0 661 219" fill="none" xmlns="http://www.w3.org/2000/svg" :class="curtainsOpen ? 'h-0' : 'lg:h-[20svh] h-full'">
            <path d="M518.689 216.116C517.266 216.116 516.148 215.709 515.334 214.896C514.521 214.083 514.114 212.964 514.114 211.541V7.19084C514.114 5.76751 514.521 4.64918 515.334 3.83585C516.148 3.02251 517.266 2.61584 518.689 2.61584H566.879C568.303 2.61584 569.421 3.02251 570.234 3.83585C571.048 4.64918 571.454 5.76751 571.454 7.19084V67.5809C571.454 68.3942 571.658 68.9025 572.064 69.1059C572.674 69.1059 573.183 68.6992 573.589 67.8858L599.209 6.27585C600.226 3.83585 602.056 2.61584 604.699 2.61584H655.024C656.651 2.61584 657.871 3.12418 658.684 4.14084C659.498 5.15751 659.498 6.47918 658.684 8.10585L615.679 98.0809C615.476 98.8942 615.476 99.7075 615.679 100.521L659.904 210.931C660.108 211.541 660.209 212.253 660.209 213.066C660.209 215.099 658.888 216.116 656.244 216.116H605.614C602.971 216.116 601.141 214.896 600.124 212.456L576.639 149.931C576.436 148.914 576.029 148.406 575.419 148.406C575.013 148.406 574.606 148.914 574.199 149.931L571.759 156.031C571.556 156.438 571.454 157.251 571.454 158.471V211.541C571.454 212.964 571.048 214.083 570.234 214.896C569.421 215.709 568.303 216.116 566.879 216.116H518.689Z" fill="white"/>
            <path d="M430.976 218.556C410.846 218.556 394.681 212.659 382.481 200.866C370.281 189.073 364.181 173.314 364.181 153.591V64.5309C364.181 44.8076 370.179 29.1509 382.176 17.5609C394.376 5.9709 410.642 0.175903 430.976 0.175903C451.106 0.175903 467.271 5.9709 479.471 17.5609C491.671 29.1509 497.771 44.8076 497.771 64.5309V66.0559C497.771 67.4792 497.364 68.6992 496.551 69.7159C495.737 70.5292 494.619 70.9359 493.196 70.9359L445.006 72.4609C441.956 72.4609 440.431 71.0376 440.431 68.1909V60.5659C440.431 57.1092 439.516 54.3642 437.686 52.3309C436.059 50.2976 433.822 49.2809 430.976 49.2809C428.129 49.2809 425.791 50.2976 423.961 52.3309C422.334 54.3642 421.521 57.1092 421.521 60.5659V158.471C421.521 161.928 422.334 164.673 423.961 166.706C425.791 168.536 428.129 169.451 430.976 169.451C433.822 169.451 436.059 168.536 437.686 166.706C439.516 164.673 440.431 161.928 440.431 158.471V150.236C440.431 147.389 441.956 145.966 445.006 145.966L493.196 147.491C494.619 147.491 495.737 147.999 496.551 149.016C497.364 149.829 497.771 150.948 497.771 152.371V153.591C497.771 166.604 494.924 178.093 489.231 188.056C483.741 197.816 475.912 205.339 465.746 210.626C455.782 215.913 444.192 218.556 430.976 218.556Z" fill="white"/>
            <path d="M294.264 216.116C292.841 216.116 291.723 215.709 290.909 214.896C290.096 214.083 289.689 212.964 289.689 211.541V7.19084C289.689 5.76751 290.096 4.64918 290.909 3.83585C291.723 3.02251 292.841 2.61584 294.264 2.61584H342.454C343.878 2.61584 344.996 3.02251 345.809 3.83585C346.623 4.64918 347.029 5.76751 347.029 7.19084V211.541C347.029 212.964 346.623 214.083 345.809 214.896C344.996 215.709 343.878 216.116 342.454 216.116H294.264Z" fill="white"/>
            <path d="M155.096 216.116C153.673 216.116 152.555 215.709 151.741 214.896C150.928 214.083 150.521 212.964 150.521 211.541V7.19084C150.521 5.76751 150.928 4.64918 151.741 3.83585C152.555 3.02251 153.673 2.61584 155.096 2.61584H203.286C204.71 2.61584 205.828 3.02251 206.641 3.83585C207.455 4.64918 207.861 5.76751 207.861 7.19084V165.181C207.861 166.401 208.471 167.011 209.691 167.011H269.166C270.59 167.011 271.708 167.418 272.521 168.231C273.335 169.044 273.742 170.163 273.742 171.586V211.541C273.742 212.964 273.335 214.083 272.521 214.896C271.708 215.709 270.59 216.116 269.166 216.116H155.096Z" fill="white"/>
            <path d="M67.3829 218.556C47.2529 218.556 31.0879 212.659 18.8879 200.866C6.68789 189.073 0.587891 173.314 0.587891 153.591V64.5309C0.587891 44.8076 6.58622 29.1509 18.5829 17.5609C30.7829 5.9709 47.0496 0.175903 67.3829 0.175903C87.5129 0.175903 103.678 5.9709 115.878 17.5609C128.078 29.1509 134.178 44.8076 134.178 64.5309V66.0559C134.178 67.4792 133.771 68.6992 132.958 69.7159C132.145 70.5292 131.026 70.9359 129.603 70.9359L81.4129 72.4609C78.3629 72.4609 76.8379 71.0376 76.8379 68.1909V60.5659C76.8379 57.1092 75.9229 54.3642 74.0929 52.3309C72.4662 50.2976 70.2296 49.2809 67.3829 49.2809C64.5362 49.2809 62.1979 50.2976 60.3679 52.3309C58.7412 54.3642 57.9279 57.1092 57.9279 60.5659V158.471C57.9279 161.928 58.7412 164.673 60.3679 166.706C62.1979 168.536 64.5362 169.451 67.3829 169.451C70.2296 169.451 72.4662 168.536 74.0929 166.706C75.9229 164.673 76.8379 161.928 76.8379 158.471V150.236C76.8379 147.389 78.3629 145.966 81.4129 145.966L129.603 147.491C131.026 147.491 132.145 147.999 132.958 149.016C133.771 149.829 134.178 150.948 134.178 152.371V153.591C134.178 166.604 131.331 178.093 125.638 188.056C120.148 197.816 112.32 205.339 102.153 210.626C92.1896 215.913 80.5996 218.556 67.3829 218.556Z" fill="white"/>
          </svg>

          <!--          <div class="absolute top-0 bottom-0 z-10 my-auto w-full bg-black transition-all duration-150" :class="curtainsOpen ? 'h-full' : 'h-0'"/>-->
        </div>
        <svg class="m-auto -mr-10 w-1/2" viewBox="0 0 301 3" fill="none" xmlns="http://www.w3.org/2000/svg" :class="curtainsOpen && 'animate__animated animate__fadeOutUp animate__faster'">
          <path d="M0.462078 2.68801C0.286078 2.68801 0.286078 2.49001 0.462078 2.09401C0.682078 1.65401 0.946078 1.21401 1.25408 0.774015C1.56208 0.334014 1.78208 0.114014 1.91408 0.114014H14.9821C15.2461 0.114014 15.2681 0.334014 15.0481 0.774015C14.8721 1.21401 14.6081 1.65401 14.2561 2.09401C13.9481 2.49001 13.6841 2.68801 13.4641 2.68801H0.462078Z" fill="white"/>
          <path d="M41.2712 2.68801C41.0952 2.68801 41.0952 2.49001 41.2712 2.09401C41.4912 1.65401 41.7552 1.21401 42.0632 0.774015C42.3712 0.334014 42.5912 0.114014 42.7232 0.114014H55.7912C56.0552 0.114014 56.0772 0.334014 55.8572 0.774015C55.6812 1.21401 55.4172 1.65401 55.0652 2.09401C54.7572 2.49001 54.4932 2.68801 54.2732 2.68801H41.2712Z" fill="white"/>
          <path d="M82.0804 2.68801C81.9044 2.68801 81.9044 2.49001 82.0804 2.09401C82.3004 1.65401 82.5644 1.21401 82.8724 0.774015C83.1804 0.334014 83.4004 0.114014 83.5324 0.114014H96.6004C96.8644 0.114014 96.8864 0.334014 96.6664 0.774015C96.4904 1.21401 96.2264 1.65401 95.8744 2.09401C95.5664 2.49001 95.3024 2.68801 95.0824 2.68801H82.0804Z" fill="white"/>
          <path d="M122.89 2.68801C122.714 2.68801 122.714 2.49001 122.89 2.09401C123.11 1.65401 123.374 1.21401 123.682 0.774015C123.99 0.334014 124.209 0.114014 124.341 0.114014H137.41C137.674 0.114014 137.695 0.334014 137.475 0.774015C137.299 1.21401 137.036 1.65401 136.684 2.09401C136.376 2.49001 136.111 2.68801 135.891 2.68801H122.89Z" fill="white"/>
          <path d="M163.699 2.68801C163.523 2.68801 163.523 2.49001 163.699 2.09401C163.919 1.65401 164.183 1.21401 164.491 0.774015C164.799 0.334014 165.019 0.114014 165.151 0.114014H178.219C178.483 0.114014 178.505 0.334014 178.285 0.774015C178.109 1.21401 177.845 1.65401 177.493 2.09401C177.185 2.49001 176.921 2.68801 176.701 2.68801H163.699Z" fill="white"/>
          <path d="M204.508 2.68801C204.332 2.68801 204.332 2.49001 204.508 2.09401C204.728 1.65401 204.992 1.21401 205.3 0.774015C205.608 0.334014 205.828 0.114014 205.96 0.114014H219.028C219.292 0.114014 219.314 0.334014 219.094 0.774015C218.918 1.21401 218.654 1.65401 218.302 2.09401C217.994 2.49001 217.73 2.68801 217.51 2.68801H204.508Z" fill="white"/>
          <path d="M245.317 2.68801C245.141 2.68801 245.141 2.49001 245.317 2.09401C245.537 1.65401 245.801 1.21401 246.109 0.774015C246.417 0.334014 246.637 0.114014 246.769 0.114014H259.837C260.101 0.114014 260.123 0.334014 259.903 0.774015C259.727 1.21401 259.463 1.65401 259.111 2.09401C258.803 2.49001 258.539 2.68801 258.319 2.68801H245.317Z" fill="white"/>
          <path d="M286.126 2.68801C285.95 2.68801 285.95 2.49001 286.126 2.09401C286.346 1.65401 286.61 1.21401 286.918 0.774015C287.226 0.334014 287.446 0.114014 287.578 0.114014H300.646C300.91 0.114014 300.932 0.334014 300.712 0.774015C300.536 1.21401 300.272 1.65401 299.92 2.09401C299.612 2.49001 299.348 2.68801 299.128 2.68801H286.126Z" fill="white"/>
        </svg>
      </div>
    </div>
  </div>
  <div class="flex w-full flex-col-reverse h-[100svh] lg:flex-row">
    <StageSelect :current-stage="currentStage" @set-current-stage="setCurrentStage"/>

    <div class="flex h-full w-full flex-col overflow-auto">
      <div v-show="currentStage === 'skills'" class="flex h-full flex-col">
        <Skills/>
      </div>
      <div v-show="currentStage === 'work'" class="flex h-full flex-col">
        <Work/>
      </div>
      <About v-if="currentStage === 'about'"/>
      <!--      <Employment v-if="currentStage === 'clients'"/>-->
      <!--      <Closure v-if="currentStage === 'closure'"/>-->
    </div>
  </div>
</template>

<script setup>
import 'animate.css';
import {ref} from "vue";
import Hero from "~/src/components/sections/hero/hero.vue";
import About from "~/src/components/sections/about/about.vue";
import Work from "~/src/components/sections/work/work.vue";
import Skills from "~/src/components/sections/skills/skills.vue";
import Employment from "~/src/components/sections/employment/employment.vue";
import Closure from "~/src/components/sections/closure/closure.vue";
import StageSelect from "~/src/components/StageSelect.vue";

const currentStage = ref('skills');
const openCurtains = ref(false)
const transitionComplete = ref(true);
const curtainsOpen = ref(false);
const togglingCurtains = ref(false);
const setCurrentStage = (stage) => {
  currentStage.value = stage;
};

const openCurtainsAction = () => {
  curtainsOpen.value = true;

  setTimeout(() => {
    transitionComplete.value = false;
  }, 300)

  setTimeout(() => {
    openCurtains.value = true;
  }, 1200);


}

</script>

<style>

::-webkit-scrollbar {
  width: 10px; /* For vertical scrollbars */
}

/* Track (the part the scrollbar sits in) */
::-webkit-scrollbar-track {
  background: #fff; /* Color of the tracking area */
}

/* Handle (the draggable scrolling element) */
::-webkit-scrollbar-thumb {
  background: #000000; /* Color of the scroll thumb */
}

/* Handle on hover */
::-webkit-scrollbar-thumb:hover {
  background: #555; /* Color of the scroll thumb on hover */
}
</style>