<template>
  <div class="relative z-10 h-full w-full overflow-auto pb-10 lg:pb-0 lg:overflow-hidden lg:pt-10">
    <div class="container relative z-20 m-auto px-5 space-y-6">
      <title-head jp="スキルと実績の数値が、能力の広がりを物語る。" color="text-[#F60000]">
        <template #title>
          <div>
            Stats
          </div>
        </template>
        Explore my top 10 skills that I pride myself on and dive into detailed insights on how I developed these skills
      </title-head>

      <div class="flex flex-wrap gap-x-6 gap-y-3">
        <LegendItem v-for="(item, i) in legend" :key="i" :icon="item.icon" :text="item.text"/>
      </div>

      <div v-if="data.length === 0" class="space-y-2">
        <div
          v-for="item in 9"
          class="relative flex cursor-pointer justify-between overflow-hidden rounded-lg bg-slate-900 px-4 py-2 backdrop-blur transition-all duration-100 group hover:scale-[0.99] hover:rounded-xl hover:bg-slate-900 hover:bg-opacity-90"
        >
          <div class="flex w-full justify-between gap-x-6 lg:w-2/3">
            <div class="flex flex-col gap-y-2 lg:flex-row lg:gap-x-6">
              <SkillInside
                class="w-fit lg:w-64 "
                icon="<svg viewBox=&quot;0 0 20 20&quot; fill=&quot;none&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;> <path fill-rule=&quot;evenodd&quot; clip-rule=&quot;evenodd&quot; d=&quot;M1.464 1.464C0 2.93 0 5.286 0 10C0 14.714 0 17.071 1.464 18.535C2.93 20 5.286 20 10 20C14.714 20 17.071 20 18.535 18.535C20 17.072 20 14.714 20 10C20 5.286 20 2.929 18.535 1.464C17.072 0 14.714 0 10 0C5.286 0 2.929 0 1.464 1.464ZM4.424 7.52C4.55134 7.36729 4.73411 7.27139 4.93213 7.25338C5.13015 7.23538 5.32721 7.29675 5.48 7.424L5.757 7.654C6.362 8.158 6.877 8.587 7.233 8.982C7.612 9.402 7.907 9.883 7.907 10.5C7.907 11.117 7.612 11.599 7.233 12.018C6.877 12.413 6.362 12.842 5.757 13.346L5.48 13.576C5.40473 13.6418 5.31705 13.692 5.22213 13.7234C5.1272 13.7549 5.02694 13.7671 4.92724 13.7592C4.82754 13.7513 4.73042 13.7236 4.6416 13.6777C4.55277 13.6317 4.47403 13.5685 4.41001 13.4917C4.34598 13.4148 4.29797 13.326 4.2688 13.2303C4.23962 13.1347 4.22987 13.0341 4.24012 12.9347C4.25037 12.8352 4.28041 12.7388 4.32847 12.6511C4.37654 12.5634 4.44166 12.4862 4.52 12.424L4.754 12.229C5.413 11.679 5.844 11.319 6.12 11.013C6.382 10.723 6.407 10.586 6.407 10.5C6.407 10.414 6.382 10.278 6.12 9.987C5.843 9.681 5.413 9.32 4.754 8.771L4.52 8.576C4.36729 8.44866 4.27139 8.26589 4.25338 8.06787C4.23538 7.86985 4.29675 7.67279 4.424 7.52ZM15.75 13C15.75 13.1989 15.671 13.3897 15.5303 13.5303C15.3897 13.671 15.1989 13.75 15 13.75H10C9.80109 13.75 9.61032 13.671 9.46967 13.5303C9.32902 13.3897 9.25 13.1989 9.25 13C9.25 12.8011 9.32902 12.6103 9.46967 12.4697C9.61032 12.329 9.80109 12.25 10 12.25H15C15.1989 12.25 15.3897 12.329 15.5303 12.4697C15.671 12.6103 15.75 12.8011 15.75 13Z&quot; fill=&quot;currentColor&quot; /> </svg>"
              >
                <div class="text-transparent">
                  .
                </div>
              </SkillInside>

              <SkillInside
                class="w-fit lg:w-52"
                icon="<svg viewBox=&quot;0 0 21 20&quot; fill=&quot;none&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;> <path d=&quot;M10.6667 0C16.1897 0 20.6667 4.477 20.6667 10C20.6667 15.523 16.1897 20 10.6667 20C5.14375 20 0.666748 15.523 0.666748 10C0.666748 4.477 5.14375 0 10.6667 0ZM10.6667 4C10.4015 4 10.1472 4.10536 9.95964 4.29289C9.77211 4.48043 9.66675 4.73478 9.66675 5V10C9.6668 10.2652 9.7722 10.5195 9.95975 10.707L12.9597 13.707C13.1484 13.8892 13.401 13.99 13.6631 13.9877C13.9253 13.9854 14.1762 13.8802 14.3616 13.6948C14.547 13.5094 14.6521 13.2586 14.6544 12.9964C14.6567 12.7342 14.5559 12.4816 14.3737 12.293L11.6667 9.586V5C11.6667 4.73478 11.5614 4.48043 11.3739 4.29289C11.1863 4.10536 10.932 4 10.6667 4Z&quot; fill=&quot;currentColor&quot; /> </svg>"
              >
                <div class="text-transparent">
                  .
                </div>
              </SkillInside>
            </div>
            <div class="flex flex-col gap-x-6 gap-y-2 lg:flex-row">
              <SkillInside
                class="w-32"
                icon="<svg viewBox=&quot;0 0 22 16&quot; fill=&quot;none&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;> <path d=&quot;M13.8099 0.222658C14.0937 0.344047 14.3157 0.568672 14.427 0.847145C14.5384 1.12562 14.53 1.43514 14.4036 1.70766L8.15363 15.2077C8.09321 15.3457 8.00469 15.4708 7.89326 15.5755C7.78183 15.6803 7.64974 15.7627 7.50472 15.8178C7.3597 15.8729 7.20468 15.8997 7.04875 15.8966C6.89281 15.8934 6.73909 15.8605 6.5966 15.7996C6.45412 15.7386 6.32573 15.651 6.21897 15.5419C6.1122 15.4327 6.02921 15.3042 5.97486 15.1639C5.9205 15.0235 5.89588 14.8742 5.90243 14.7246C5.90898 14.575 5.94658 14.4281 6.01301 14.2927L12.263 0.792658C12.3895 0.520194 12.6234 0.30709 12.9135 0.200201C13.2036 0.093313 13.526 0.101391 13.8099 0.222658ZM5.36145 3.78516C5.59351 3.9832 5.73422 4.26155 5.75268 4.55911C5.77114 4.85666 5.66583 5.14908 5.45988 5.37216L3.02551 8.00016L5.45988 10.6282C5.66626 10.8513 5.77182 11.1441 5.75336 11.442C5.7349 11.7399 5.59393 12.0185 5.36145 12.2167C5.24634 12.3148 5.11222 12.3901 4.96677 12.4385C4.82132 12.4868 4.66737 12.5072 4.51372 12.4984C4.2034 12.4807 3.91313 12.3453 3.70676 12.1222L0.581759 8.74716C0.391315 8.54128 0.286133 8.2755 0.286133 8.00016C0.286133 7.72482 0.391315 7.45904 0.581759 7.25316L3.70676 3.87816C3.80908 3.76729 3.93319 3.67691 4.07198 3.6122C4.21078 3.5475 4.36151 3.50974 4.51554 3.5011C4.66957 3.49246 4.82387 3.51311 4.96956 3.56185C5.11526 3.6106 5.2495 3.68648 5.36457 3.78516M16.3083 3.78516C16.4233 3.68694 16.5573 3.61144 16.7027 3.56296C16.8481 3.51447 17.0021 3.49397 17.1557 3.5026C17.3094 3.51124 17.4598 3.54885 17.5983 3.61329C17.7368 3.67773 17.8607 3.76773 17.963 3.87816L21.088 7.25316C21.2785 7.45904 21.3836 7.72482 21.3836 8.00016C21.3836 8.2755 21.2785 8.54128 21.088 8.74716L17.963 12.1222C17.7566 12.3453 17.4664 12.4807 17.1561 12.4984C16.8457 12.5161 16.5408 12.4148 16.3083 12.2167C16.0758 12.0185 15.9349 11.7399 15.9164 11.442C15.8979 11.1441 16.0035 10.8513 16.2099 10.6282L18.6396 8.00016L16.2083 5.37216C16.0024 5.14908 15.8971 4.85666 15.9155 4.55911C15.934 4.26155 16.0763 3.9832 16.3083 3.78516Z&quot; fill=&quot;currentColor&quot; /> </svg>"
              />
              <SkillInside
                class="w-32"
                icon="<svg viewBox=&quot;0 0 18 16&quot; fill=&quot;none&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;> <path d=&quot;M16 0C16.5304 0 17.0391 0.210714 17.4142 0.585786C17.7893 0.960859 18 1.46957 18 2V14C18 14.5304 17.7893 15.0391 17.4142 15.4142C17.0391 15.7893 16.5304 16 16 16H2C1.46957 16 0.960859 15.7893 0.585786 15.4142C0.210714 15.0391 0 14.5304 0 14V2C0 1.46957 0.210714 0.960859 0.585786 0.585786C0.960859 0.210714 1.46957 0 2 0H16ZM16 6H2V13C2.00003 13.2449 2.08996 13.4813 2.25272 13.6644C2.41547 13.8474 2.63975 13.9643 2.883 13.993L3 14H15C15.2449 14 15.4813 13.91 15.6644 13.7473C15.8474 13.5845 15.9643 13.3603 15.993 13.117L16 13V6ZM3 2C2.73478 2 2.48043 2.10536 2.29289 2.29289C2.10536 2.48043 2 2.73478 2 3C2 3.26522 2.10536 3.51957 2.29289 3.70711C2.48043 3.89464 2.73478 4 3 4C3.26522 4 3.51957 3.89464 3.70711 3.70711C3.89464 3.51957 4 3.26522 4 3C4 2.73478 3.89464 2.48043 3.70711 2.29289C3.51957 2.10536 3.26522 2 3 2ZM6 2C5.73478 2 5.48043 2.10536 5.29289 2.29289C5.10536 2.48043 5 2.73478 5 3C5 3.26522 5.10536 3.51957 5.29289 3.70711C5.48043 3.89464 5.73478 4 6 4C6.26522 4 6.51957 3.89464 6.70711 3.70711C6.89464 3.51957 7 3.26522 7 3C7 2.73478 6.89464 2.48043 6.70711 2.29289C6.51957 2.10536 6.26522 2 6 2ZM9 2C8.73478 2 8.48043 2.10536 8.29289 2.29289C8.10536 2.48043 8 2.73478 8 3C8 3.26522 8.10536 3.51957 8.29289 3.70711C8.48043 3.89464 8.73478 4 9 4C9.26522 4 9.51957 3.89464 9.70711 3.70711C9.89464 3.51957 10 3.26522 10 3C10 2.73478 9.89464 2.48043 9.70711 2.29289C9.51957 2.10536 9.26522 2 9 2Z&quot; fill=&quot;currentColor&quot; /> </svg>"
              />
            </div>
          </div>
        </div>
      </div>
      <div v-else class="space-y-2">
        <div
          v-for="(item, i) in data"
          :key="i"
          class="relative flex cursor-pointer justify-between overflow-hidden rounded-lg bg-slate-900 px-4 py-2 backdrop-blur transition-all duration-100 group hover:scale-[0.99] hover:rounded-xl hover:bg-slate-900 hover:bg-opacity-90"
          @click="switchInDepth(item)"
          @mouseover="isShowing = i"
        >
          <div class="flex w-full justify-between gap-x-6 lg:w-2/3">
            <div class="flex flex-col gap-y-2 lg:flex-row lg:gap-x-6">
              <SkillInside
                class="w-fit lg:w-64"
                icon="<svg viewBox=&quot;0 0 20 20&quot; fill=&quot;none&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;> <path fill-rule=&quot;evenodd&quot; clip-rule=&quot;evenodd&quot; d=&quot;M1.464 1.464C0 2.93 0 5.286 0 10C0 14.714 0 17.071 1.464 18.535C2.93 20 5.286 20 10 20C14.714 20 17.071 20 18.535 18.535C20 17.072 20 14.714 20 10C20 5.286 20 2.929 18.535 1.464C17.072 0 14.714 0 10 0C5.286 0 2.929 0 1.464 1.464ZM4.424 7.52C4.55134 7.36729 4.73411 7.27139 4.93213 7.25338C5.13015 7.23538 5.32721 7.29675 5.48 7.424L5.757 7.654C6.362 8.158 6.877 8.587 7.233 8.982C7.612 9.402 7.907 9.883 7.907 10.5C7.907 11.117 7.612 11.599 7.233 12.018C6.877 12.413 6.362 12.842 5.757 13.346L5.48 13.576C5.40473 13.6418 5.31705 13.692 5.22213 13.7234C5.1272 13.7549 5.02694 13.7671 4.92724 13.7592C4.82754 13.7513 4.73042 13.7236 4.6416 13.6777C4.55277 13.6317 4.47403 13.5685 4.41001 13.4917C4.34598 13.4148 4.29797 13.326 4.2688 13.2303C4.23962 13.1347 4.22987 13.0341 4.24012 12.9347C4.25037 12.8352 4.28041 12.7388 4.32847 12.6511C4.37654 12.5634 4.44166 12.4862 4.52 12.424L4.754 12.229C5.413 11.679 5.844 11.319 6.12 11.013C6.382 10.723 6.407 10.586 6.407 10.5C6.407 10.414 6.382 10.278 6.12 9.987C5.843 9.681 5.413 9.32 4.754 8.771L4.52 8.576C4.36729 8.44866 4.27139 8.26589 4.25338 8.06787C4.23538 7.86985 4.29675 7.67279 4.424 7.52ZM15.75 13C15.75 13.1989 15.671 13.3897 15.5303 13.5303C15.3897 13.671 15.1989 13.75 15 13.75H10C9.80109 13.75 9.61032 13.671 9.46967 13.5303C9.32902 13.3897 9.25 13.1989 9.25 13C9.25 12.8011 9.32902 12.6103 9.46967 12.4697C9.61032 12.329 9.80109 12.25 10 12.25H15C15.1989 12.25 15.3897 12.329 15.5303 12.4697C15.671 12.6103 15.75 12.8011 15.75 13Z&quot; fill=&quot;currentColor&quot; /> </svg>"
              >
                {{
                  item.name
                }}
              </SkillInside>

              <SkillInside
                class="w-fit lg:w-52"
                icon="<svg viewBox=&quot;0 0 21 20&quot; fill=&quot;none&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;> <path d=&quot;M10.6667 0C16.1897 0 20.6667 4.477 20.6667 10C20.6667 15.523 16.1897 20 10.6667 20C5.14375 20 0.666748 15.523 0.666748 10C0.666748 4.477 5.14375 0 10.6667 0ZM10.6667 4C10.4015 4 10.1472 4.10536 9.95964 4.29289C9.77211 4.48043 9.66675 4.73478 9.66675 5V10C9.6668 10.2652 9.7722 10.5195 9.95975 10.707L12.9597 13.707C13.1484 13.8892 13.401 13.99 13.6631 13.9877C13.9253 13.9854 14.1762 13.8802 14.3616 13.6948C14.547 13.5094 14.6521 13.2586 14.6544 12.9964C14.6567 12.7342 14.5559 12.4816 14.3737 12.293L11.6667 9.586V5C11.6667 4.73478 11.5614 4.48043 11.3739 4.29289C11.1863 4.10536 10.932 4 10.6667 4Z&quot; fill=&quot;currentColor&quot; /> </svg>"
              >
                {{
                  formatTime(item.time)
                }}
              </SkillInside>
            </div>
            <div class="flex flex-col gap-x-6 gap-y-2 lg:flex-row">
              <SkillInside
                class="w-32"
                icon="<svg viewBox=&quot;0 0 22 16&quot; fill=&quot;none&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;> <path d=&quot;M13.8099 0.222658C14.0937 0.344047 14.3157 0.568672 14.427 0.847145C14.5384 1.12562 14.53 1.43514 14.4036 1.70766L8.15363 15.2077C8.09321 15.3457 8.00469 15.4708 7.89326 15.5755C7.78183 15.6803 7.64974 15.7627 7.50472 15.8178C7.3597 15.8729 7.20468 15.8997 7.04875 15.8966C6.89281 15.8934 6.73909 15.8605 6.5966 15.7996C6.45412 15.7386 6.32573 15.651 6.21897 15.5419C6.1122 15.4327 6.02921 15.3042 5.97486 15.1639C5.9205 15.0235 5.89588 14.8742 5.90243 14.7246C5.90898 14.575 5.94658 14.4281 6.01301 14.2927L12.263 0.792658C12.3895 0.520194 12.6234 0.30709 12.9135 0.200201C13.2036 0.093313 13.526 0.101391 13.8099 0.222658ZM5.36145 3.78516C5.59351 3.9832 5.73422 4.26155 5.75268 4.55911C5.77114 4.85666 5.66583 5.14908 5.45988 5.37216L3.02551 8.00016L5.45988 10.6282C5.66626 10.8513 5.77182 11.1441 5.75336 11.442C5.7349 11.7399 5.59393 12.0185 5.36145 12.2167C5.24634 12.3148 5.11222 12.3901 4.96677 12.4385C4.82132 12.4868 4.66737 12.5072 4.51372 12.4984C4.2034 12.4807 3.91313 12.3453 3.70676 12.1222L0.581759 8.74716C0.391315 8.54128 0.286133 8.2755 0.286133 8.00016C0.286133 7.72482 0.391315 7.45904 0.581759 7.25316L3.70676 3.87816C3.80908 3.76729 3.93319 3.67691 4.07198 3.6122C4.21078 3.5475 4.36151 3.50974 4.51554 3.5011C4.66957 3.49246 4.82387 3.51311 4.96956 3.56185C5.11526 3.6106 5.2495 3.68648 5.36457 3.78516M16.3083 3.78516C16.4233 3.68694 16.5573 3.61144 16.7027 3.56296C16.8481 3.51447 17.0021 3.49397 17.1557 3.5026C17.3094 3.51124 17.4598 3.54885 17.5983 3.61329C17.7368 3.67773 17.8607 3.76773 17.963 3.87816L21.088 7.25316C21.2785 7.45904 21.3836 7.72482 21.3836 8.00016C21.3836 8.2755 21.2785 8.54128 21.088 8.74716L17.963 12.1222C17.7566 12.3453 17.4664 12.4807 17.1561 12.4984C16.8457 12.5161 16.5408 12.4148 16.3083 12.2167C16.0758 12.0185 15.9349 11.7399 15.9164 11.442C15.8979 11.1441 16.0035 10.8513 16.2099 10.6282L18.6396 8.00016L16.2083 5.37216C16.0024 5.14908 15.8971 4.85666 15.9155 4.55911C15.934 4.26155 16.0763 3.9832 16.3083 3.78516Z&quot; fill=&quot;currentColor&quot; /> </svg>"
              >
                {{
                  item.syntax !== 'na' ? item.syntax + '%' : 'N/A'
                }}
              </SkillInside>
              <SkillInside
                class="w-32"
                icon="<svg viewBox=&quot;0 0 18 16&quot; fill=&quot;none&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;> <path d=&quot;M16 0C16.5304 0 17.0391 0.210714 17.4142 0.585786C17.7893 0.960859 18 1.46957 18 2V14C18 14.5304 17.7893 15.0391 17.4142 15.4142C17.0391 15.7893 16.5304 16 16 16H2C1.46957 16 0.960859 15.7893 0.585786 15.4142C0.210714 15.0391 0 14.5304 0 14V2C0 1.46957 0.210714 0.960859 0.585786 0.585786C0.960859 0.210714 1.46957 0 2 0H16ZM16 6H2V13C2.00003 13.2449 2.08996 13.4813 2.25272 13.6644C2.41547 13.8474 2.63975 13.9643 2.883 13.993L3 14H15C15.2449 14 15.4813 13.91 15.6644 13.7473C15.8474 13.5845 15.9643 13.3603 15.993 13.117L16 13V6ZM3 2C2.73478 2 2.48043 2.10536 2.29289 2.29289C2.10536 2.48043 2 2.73478 2 3C2 3.26522 2.10536 3.51957 2.29289 3.70711C2.48043 3.89464 2.73478 4 3 4C3.26522 4 3.51957 3.89464 3.70711 3.70711C3.89464 3.51957 4 3.26522 4 3C4 2.73478 3.89464 2.48043 3.70711 2.29289C3.51957 2.10536 3.26522 2 3 2ZM6 2C5.73478 2 5.48043 2.10536 5.29289 2.29289C5.10536 2.48043 5 2.73478 5 3C5 3.26522 5.10536 3.51957 5.29289 3.70711C5.48043 3.89464 5.73478 4 6 4C6.26522 4 6.51957 3.89464 6.70711 3.70711C6.89464 3.51957 7 3.26522 7 3C7 2.73478 6.89464 2.48043 6.70711 2.29289C6.51957 2.10536 6.26522 2 6 2ZM9 2C8.73478 2 8.48043 2.10536 8.29289 2.29289C8.10536 2.48043 8 2.73478 8 3C8 3.26522 8.10536 3.51957 8.29289 3.70711C8.48043 3.89464 8.73478 4 9 4C9.26522 4 9.51957 3.89464 9.70711 3.70711C9.89464 3.51957 10 3.26522 10 3C10 2.73478 9.89464 2.48043 9.70711 2.29289C9.51957 2.10536 9.26522 2 9 2Z&quot; fill=&quot;currentColor&quot; /> </svg>"
              >
                {{
                  item.projects !== 'na' ? item.projects : 'N/A'
                }}
              </SkillInside>
            </div>
          </div>
          <div
            v-if="item.in_depth !== null"
            class="relative z-20 my-auto flex h-4 w-4 translate-x-10 text-white transition-all duration-75 group-hover:translate-x-0"
          >
            <IconLibrary name="arrow-right"/>
          </div>
          <!--          <div class="absolute top-0 right-0 bottom-0 left-0 m-auto hidden h-10 rounded-sm bg-white opacity-0 transition-all duration-75 w-[99.7%] group-hover:opacity-100 lg:flex"/>-->
        </div>
        <div
          class="relative m-auto flex h-fit w-fit cursor-pointer justify-between overflow-hidden rounded-md bg-slate-900 px-20 py-2 font-semibold uppercase leading-none text-white transition-all duration-75 group font-jet hover:bg-white"
          @click="viewSkills"
        >
          <span class="text-lg transition-all duration-75 group-hover:-translate-x-10 lg:text-xl">View All</span>
          <span class="absolute top-0 right-0 bottom-0 left-0 z-20 m-auto size-5 lg:size-4  translate-x-20 rotate-90 text-slate-900 transition-all duration-75 group-hover:-translate-x-0 lg:h-5 lg:w-5">
            <svg viewBox="0 0 9 10" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M4.14346 9.60627C4.34238 9.60627 4.53314 9.52726 4.67379 9.3866C4.81445 9.24595 4.89346 9.05519 4.89346 8.85627V2.91627L6.86346 4.88627C7.00564 5.01875 7.19369 5.09088 7.38799 5.08745C7.58229 5.08402 7.76767 5.00531 7.90509 4.8679C8.0425 4.73048 8.12121 4.5451 8.12464 4.3508C8.12807 4.1565 8.05594 3.96845 7.92346 3.82627L4.67346 0.576274C4.53284 0.435823 4.34221 0.356934 4.14346 0.356934C3.94471 0.356934 3.75409 0.435823 3.61346 0.576274L0.363464 3.82627C0.289777 3.89494 0.230675 3.97774 0.189683 4.06974C0.148691 4.16173 0.126649 4.26105 0.124873 4.36175C0.123096 4.46245 0.14162 4.56248 0.179341 4.65587C0.217062 4.74926 0.273207 4.83409 0.344426 4.90531C0.415644 4.97653 0.500478 5.03268 0.593867 5.0704C0.687255 5.10812 0.787284 5.12664 0.887987 5.12487C0.98869 5.12309 1.088 5.10105 1.18 5.06005C1.272 5.01906 1.3548 4.95996 1.42346 4.88627L3.39346 2.91627V8.85627C3.39346 9.27027 3.72946 9.60627 4.14346 9.60627Z"
                fill="currentColor"
              />
            </svg>
          </span>
        </div>
      </div>
    </div>
    <!--    <div class="pointer-events-none absolute top-20 right-0 lg:top-32">-->
    <!--      <img src="/svg/stats.svg" class="h-10 opacity-50 lg:h-44" alt="">-->
    <!--    </div>-->
  </div>
  <img src="/svg/bonsai.svg" class="absolute right-4 -bottom-0 h-[300px] lg:h-[500px] lg:right-32" alt="">
  <AllSkills
    :states="states"
    :skills="dataPreProcess"
    @view-in-depth="switchInDepth"
    @view-skills="viewSkills"
    @switch-skill="switchSkill"
  />
  <IndepthViewer v-if="states.inDepth" :in-depth="states.inDepth" @quit="switchInDepth"/>
</template>
<script setup>
import {ref} from "vue";
import AllSkills from "~/src/components/sections/skills/AllSkills.vue";
import LegendItem from "~/src/components/sections/skills/skill/LegendItem.vue";
import TitleHead from "~/src/components/reusables/TitleHead.vue";
import IndepthViewer from "~/src/components/sections/skills/IndepthViewer.vue";
import SkillInside from "~/src/components/sections/skills/skill/SkillInside.vue";
import IconLibrary from "~/src/components/misc/IconLibrary.vue";


const isShowing = ref(0);
const states = ref({
  viewingSkills: ref(false),
  currentSkill: ref(0),
  inDepth: ref(null),
})

const viewSkills = () => {
  if (states.value.viewingSkills){
    states.value.viewingSkills = false;
    // document.body.style.overflowY = 'scroll';
  } else {
    states.value.viewingSkills = true;
    // document.body.style.overflow = 'hidden';
  }
}
const switchSkill = (id) => {
  if (states.value.currentSkill === id){
    states.value.currentSkill = null;
  } else {
    states.value.currentSkill = id;
  }
}

const switchInDepth = (newInDepth) => {
  if (newInDepth === undefined && !states.value.viewingSkills){
    states.value.inDepth = null;
    // document.body.style.overflowY = 'scroll';
  } else {
    // document.body.style.overflow = 'hidden';
    states.value.inDepth = null;
    setTimeout(() => {
      states.value.inDepth = newInDepth;
    }, 100)
  }
}


const legend = [
  {
    icon: `<svg  viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg"> <path fill-rule="evenodd" clip-rule="evenodd" d="M1.464 1.964C0 3.43 0 5.786 0 10.5C0 15.214 0 17.571 1.464 19.035C2.93 20.5 5.286 20.5 10 20.5C14.714 20.5 17.071 20.5 18.535 19.035C20 17.572 20 15.214 20 10.5C20 5.786 20 3.429 18.535 1.964C17.072 0.5 14.714 0.5 10 0.5C5.286 0.5 2.929 0.5 1.464 1.964ZM4.424 8.02C4.55134 7.86729 4.73411 7.77139 4.93213 7.75338C5.13015 7.73538 5.32721 7.79675 5.48 7.924L5.757 8.154C6.362 8.658 6.877 9.087 7.233 9.482C7.612 9.902 7.907 10.383 7.907 11C7.907 11.617 7.612 12.099 7.233 12.518C6.877 12.913 6.362 13.342 5.757 13.846L5.48 14.076C5.40473 14.1418 5.31705 14.192 5.22213 14.2234C5.1272 14.2549 5.02694 14.2671 4.92724 14.2592C4.82754 14.2513 4.73042 14.2236 4.6416 14.1777C4.55277 14.1317 4.47403 14.0685 4.41001 13.9917C4.34598 13.9148 4.29797 13.826 4.2688 13.7303C4.23962 13.6347 4.22987 13.5341 4.24012 13.4347C4.25037 13.3352 4.28041 13.2388 4.32847 13.1511C4.37654 13.0634 4.44166 12.9862 4.52 12.924L4.754 12.729C5.413 12.179 5.844 11.819 6.12 11.513C6.382 11.223 6.407 11.086 6.407 11C6.407 10.914 6.382 10.778 6.12 10.487C5.843 10.181 5.413 9.82 4.754 9.271L4.52 9.076C4.36729 8.94866 4.27139 8.76589 4.25338 8.56787C4.23538 8.36985 4.29675 8.17279 4.424 8.02ZM15.75 13.5C15.75 13.6989 15.671 13.8897 15.5303 14.0303C15.3897 14.171 15.1989 14.25 15 14.25H10C9.80109 14.25 9.61032 14.171 9.46967 14.0303C9.32902 13.8897 9.25 13.6989 9.25 13.5C9.25 13.3011 9.32902 13.1103 9.46967 12.9697C9.61032 12.829 9.80109 12.75 10 12.75H15C15.1989 12.75 15.3897 12.829 15.5303 12.9697C15.671 13.1103 15.75 13.3011 15.75 13.5Z" fill="currentColor"/> </svg>`,
    text: `Software name`,
  },
  {
    icon: `<svg viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M10 0.5C15.523 0.5 20 4.977 20 10.5C20 16.023 15.523 20.5 10 20.5C4.477 20.5 0 16.023 0 10.5C0 4.977 4.477 0.5 10 0.5ZM10 4.5C9.73478 4.5 9.48043 4.60536 9.29289 4.79289C9.10536 4.98043 9 5.23478 9 5.5V10.5C9.00006 10.7652 9.10545 11.0195 9.293 11.207L12.293 14.207C12.4816 14.3892 12.7342 14.49 12.9964 14.4877C13.2586 14.4854 13.5094 14.3802 13.6948 14.1948C13.8802 14.0094 13.9854 13.7586 13.9877 13.4964C13.99 13.2342 13.8892 12.9816 13.707 12.793L11 10.086V5.5C11 5.23478 10.8946 4.98043 10.7071 4.79289C10.5196 4.60536 10.2652 4.5 10 4.5Z" fill="currentColor"/> </svg>`,
    text: `Time Using Software`,
  },
  {
    icon: `<svg viewBox="0 0 23 17" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M14.4765 0.722658C14.7603 0.844047 14.9823 1.06867 15.0937 1.34714C15.205 1.62562 15.1966 1.93514 15.0703 2.20766L8.82026 15.7077C8.75983 15.8457 8.67131 15.9708 8.55989 16.0755C8.44846 16.1803 8.31636 16.2627 8.17135 16.3178C8.02633 16.3729 7.87131 16.3997 7.71537 16.3966C7.55943 16.3934 7.40572 16.3605 7.26323 16.2996C7.12074 16.2386 6.99236 16.151 6.88559 16.0419C6.77883 15.9327 6.69584 15.8042 6.64148 15.6639C6.58713 15.5235 6.56251 15.3742 6.56906 15.2246C6.57561 15.075 6.6132 14.9281 6.67964 14.7927L12.9296 1.29266C13.0561 1.02019 13.2901 0.80709 13.5801 0.700201C13.8702 0.593313 14.1926 0.601391 14.4765 0.722658ZM6.02807 4.28516C6.26014 4.4832 6.40085 4.76155 6.41931 5.05911C6.43776 5.35666 6.33246 5.64908 6.12651 5.87216L3.69213 8.50016L6.12651 11.1282C6.33288 11.3513 6.43845 11.6441 6.41999 11.942C6.40153 12.2399 6.26055 12.5185 6.02807 12.7167C5.91296 12.8148 5.77885 12.8901 5.6334 12.9385C5.48794 12.9868 5.33399 13.0072 5.18034 12.9984C4.87003 12.9807 4.57976 12.8453 4.37338 12.6222L1.24838 9.24716C1.05794 9.04128 0.952759 8.7755 0.952759 8.50016C0.952759 8.22482 1.05794 7.95904 1.24838 7.75316L4.37338 4.37816C4.4757 4.26729 4.59982 4.17691 4.73861 4.1122C4.8774 4.0475 5.02814 4.00974 5.18217 4.0011C5.3362 3.99246 5.49049 4.01311 5.63619 4.06185C5.78189 4.1106 5.91613 4.18648 6.0312 4.28516M16.9749 4.28516C17.0899 4.18694 17.224 4.11144 17.3694 4.06296C17.5148 4.01447 17.6687 3.99397 17.8224 4.0026C17.976 4.01124 18.1264 4.04885 18.2649 4.11329C18.4034 4.17773 18.5274 4.26773 18.6296 4.37816L21.7546 7.75316C21.9451 7.95904 22.0503 8.22482 22.0503 8.50016C22.0503 8.7755 21.9451 9.04128 21.7546 9.24716L18.6296 12.6222C18.4233 12.8453 18.133 12.9807 17.8227 12.9984C17.5124 13.0161 17.2074 12.9148 16.9749 12.7167C16.7425 12.5185 16.6015 12.2399 16.583 11.942C16.5646 11.6441 16.6701 11.3513 16.8765 11.1282L19.3062 8.50016L16.8749 5.87216C16.669 5.64908 16.5637 5.35666 16.5822 5.05911C16.6006 4.76155 16.7429 4.4832 16.9749 4.28516Z" fill="currentColor"/> </svg>`,
    text: `Software Knowledge`,
  },
  {
    icon: `<svg viewBox="0 0 18 17" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M16 0.5C16.5304 0.5 17.0391 0.710714 17.4142 1.08579C17.7893 1.46086 18 1.96957 18 2.5V14.5C18 15.0304 17.7893 15.5391 17.4142 15.9142C17.0391 16.2893 16.5304 16.5 16 16.5H2C1.46957 16.5 0.960859 16.2893 0.585786 15.9142C0.210714 15.5391 0 15.0304 0 14.5V2.5C0 1.96957 0.210714 1.46086 0.585786 1.08579C0.960859 0.710714 1.46957 0.5 2 0.5H16ZM16 6.5H2V13.5C2.00003 13.7449 2.08996 13.9813 2.25272 14.1644C2.41547 14.3474 2.63975 14.4643 2.883 14.493L3 14.5H15C15.2449 14.5 15.4813 14.41 15.6644 14.2473C15.8474 14.0845 15.9643 13.8603 15.993 13.617L16 13.5V6.5ZM3 2.5C2.73478 2.5 2.48043 2.60536 2.29289 2.79289C2.10536 2.98043 2 3.23478 2 3.5C2 3.76522 2.10536 4.01957 2.29289 4.20711C2.48043 4.39464 2.73478 4.5 3 4.5C3.26522 4.5 3.51957 4.39464 3.70711 4.20711C3.89464 4.01957 4 3.76522 4 3.5C4 3.23478 3.89464 2.98043 3.70711 2.79289C3.51957 2.60536 3.26522 2.5 3 2.5ZM6 2.5C5.73478 2.5 5.48043 2.60536 5.29289 2.79289C5.10536 2.98043 5 3.23478 5 3.5C5 3.76522 5.10536 4.01957 5.29289 4.20711C5.48043 4.39464 5.73478 4.5 6 4.5C6.26522 4.5 6.51957 4.39464 6.70711 4.20711C6.89464 4.01957 7 3.76522 7 3.5C7 3.23478 6.89464 2.98043 6.70711 2.79289C6.51957 2.60536 6.26522 2.5 6 2.5ZM9 2.5C8.73478 2.5 8.48043 2.60536 8.29289 2.79289C8.10536 2.98043 8 3.23478 8 3.5C8 3.76522 8.10536 4.01957 8.29289 4.20711C8.48043 4.39464 8.73478 4.5 9 4.5C9.26522 4.5 9.51957 4.39464 9.70711 4.20711C9.89464 4.01957 10 3.76522 10 3.5C10 3.23478 9.89464 2.98043 9.70711 2.79289C9.51957 2.60536 9.26522 2.5 9 2.5Z" fill="currentColor"/> </svg>`,
    text: `Projects`,
  },
]
const data = ref([]);
const dataPreProcess = ref([]);

const fetchSkills = () => {
  fetch(`${import.meta.env.VITE_BASE_URL}/api/skills`)
    .then(response => response.json())
    .then(fetchedData => {
      const allSkills = [];
      dataPreProcess.value = fetchedData;

      fetchedData.forEach(category => {
        category.skills.forEach(skill => {
          if (skill.is_primary === 1){
            allSkills.push(skill);
          }
        });
      });

      allSkills.sort((b, a) => parseInt(a.time) - parseInt(b.time));
      data.value = allSkills.slice(0, 10);
    })
    .catch(error => {
      console.error('Error:', error);
    });
};

fetchSkills();

function formatTime(hours){
  if (hours < 72){
    return `${hours} h`; // Less than 72 hours
  } else if (hours < 8760){ // 365 days
    const days = Math.round(hours / 24);
    return `${days} d`;
  } else if (hours < 8760 * 2){ // 2 years
    const months = Math.round(hours / (24 * 365 / 12));
    return `${months} m`;
  } else {
    const years = Math.round(hours / (24 * 365));
    return `${years} y`;
  }
}

</script>