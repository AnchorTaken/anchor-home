<template>
  <div class="fixed right-0 bottom-10 left-0 z-50 px-2 mx-auto lg:w-6/12">
    <div class="relative z-10 ">
      <div class="relative z-10 mx-auto my-auto h-fit rounded-3xl bg-slate-900 p-3 text-white transition-all duration-100 space-y-4 lg:p-4">
        <div class="relative z-10 flex w-full justify-between">
          <div class="flex flex-col justify-between gap-y-2 lg:flex-row lg:gap-x-4">
            <div class="flex gap-x-2 lg:gap-x-4">
              <div class="z-10 flex w-fit rounded-full bg-white px-3 py-2 space-x-3 lg:px-4 lg:py-2">
                <i class="my-auto flex h-4 w-4 text-slate-900 lg:h-5 lg:w-5">
                  <svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M1.464 1.464C0 2.93 0 5.286 0 10C0 14.714 0 17.071 1.464 18.535C2.93 20 5.286 20 10 20C14.714 20 17.071 20 18.535 18.535C20 17.072 20 14.714 20 10C20 5.286 20 2.929 18.535 1.464C17.072 0 14.714 0 10 0C5.286 0 2.929 0 1.464 1.464ZM4.424 7.52C4.55134 7.36729 4.73411 7.27139 4.93213 7.25338C5.13015 7.23538 5.32721 7.29675 5.48 7.424L5.757 7.654C6.362 8.158 6.877 8.587 7.233 8.982C7.612 9.402 7.907 9.883 7.907 10.5C7.907 11.117 7.612 11.599 7.233 12.018C6.877 12.413 6.362 12.842 5.757 13.346L5.48 13.576C5.40473 13.6418 5.31705 13.692 5.22213 13.7234C5.1272 13.7549 5.02694 13.7671 4.92724 13.7592C4.82754 13.7513 4.73042 13.7236 4.6416 13.6777C4.55277 13.6317 4.47403 13.5685 4.41001 13.4917C4.34598 13.4148 4.29797 13.326 4.2688 13.2303C4.23962 13.1347 4.22987 13.0341 4.24012 12.9347C4.25037 12.8352 4.28041 12.7388 4.32847 12.6511C4.37654 12.5634 4.44166 12.4862 4.52 12.424L4.754 12.229C5.413 11.679 5.844 11.319 6.12 11.013C6.382 10.723 6.407 10.586 6.407 10.5C6.407 10.414 6.382 10.278 6.12 9.987C5.843 9.681 5.413 9.32 4.754 8.771L4.52 8.576C4.36729 8.44866 4.27139 8.26589 4.25338 8.06787C4.23538 7.86985 4.29675 7.67279 4.424 7.52ZM15.75 13C15.75 13.1989 15.671 13.3897 15.5303 13.5303C15.3897 13.671 15.1989 13.75 15 13.75H10C9.80109 13.75 9.61032 13.671 9.46967 13.5303C9.32902 13.3897 9.25 13.1989 9.25 13C9.25 12.8011 9.32902 12.6103 9.46967 12.4697C9.61032 12.329 9.80109 12.25 10 12.25H15C15.1989 12.25 15.3897 12.329 15.5303 12.4697C15.671 12.6103 15.75 12.8011 15.75 13Z" fill="currentColor"/>
                  </svg>
                </i>

                <span class="my-auto flex h-fit text-lg font-semibold uppercase leading-none text-slate-900 font-jet lg:text-2xl">{{ inDepth.name }}</span>
              </div>
              <div class="z-10 flex rounded-full bg-white px-4 py-2 space-x-3">
                <i class="my-auto flex h-4 w-4 text-slate-900 lg:w-5 lg:lg:h-5">
                  <svg viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10.6667 0C16.1897 0 20.6667 4.477 20.6667 10C20.6667 15.523 16.1897 20 10.6667 20C5.14375 20 0.666748 15.523 0.666748 10C0.666748 4.477 5.14375 0 10.6667 0ZM10.6667 4C10.4015 4 10.1472 4.10536 9.95964 4.29289C9.77211 4.48043 9.66675 4.73478 9.66675 5V10C9.6668 10.2652 9.7722 10.5195 9.95975 10.707L12.9597 13.707C13.1484 13.8892 13.401 13.99 13.6631 13.9877C13.9253 13.9854 14.1762 13.8802 14.3616 13.6948C14.547 13.5094 14.6521 13.2586 14.6544 12.9964C14.6567 12.7342 14.5559 12.4816 14.3737 12.293L11.6667 9.586V5C11.6667 4.73478 11.5614 4.48043 11.3739 4.29289C11.1863 4.10536 10.932 4 10.6667 4Z" fill="currentColor"/>
                  </svg>
                </i>
                <span class="my-auto flex h-fit text-lg font-semibold uppercase leading-none text-slate-900 font-jet lg:text-2xl-2xl"> {{ formatTime(inDepth.time) }}</span>
              </div>
            </div>
            <div class="flex gap-x-2 lg:gap-x-4">
              <div v-if="inDepth.syntax !== 'na'" class="z-10 flex rounded-full bg-white px-4 py-2 space-x-3">
                <i class="my-auto flex h-6 w-6 text-slate-900">
                  <svg viewBox="0 0 22 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M13.8099 0.222658C14.0937 0.344047 14.3157 0.568672 14.427 0.847145C14.5384 1.12562 14.53 1.43514 14.4036 1.70766L8.15363 15.2077C8.09321 15.3457 8.00469 15.4708 7.89326 15.5755C7.78183 15.6803 7.64974 15.7627 7.50472 15.8178C7.3597 15.8729 7.20468 15.8997 7.04875 15.8966C6.89281 15.8934 6.73909 15.8605 6.5966 15.7996C6.45412 15.7386 6.32573 15.651 6.21897 15.5419C6.1122 15.4327 6.02921 15.3042 5.97486 15.1639C5.9205 15.0235 5.89588 14.8742 5.90243 14.7246C5.90898 14.575 5.94658 14.4281 6.01301 14.2927L12.263 0.792658C12.3895 0.520194 12.6234 0.30709 12.9135 0.200201C13.2036 0.093313 13.526 0.101391 13.8099 0.222658ZM5.36145 3.78516C5.59351 3.9832 5.73422 4.26155 5.75268 4.55911C5.77114 4.85666 5.66583 5.14908 5.45988 5.37216L3.02551 8.00016L5.45988 10.6282C5.66626 10.8513 5.77182 11.1441 5.75336 11.442C5.7349 11.7399 5.59393 12.0185 5.36145 12.2167C5.24634 12.3148 5.11222 12.3901 4.96677 12.4385C4.82132 12.4868 4.66737 12.5072 4.51372 12.4984C4.2034 12.4807 3.91313 12.3453 3.70676 12.1222L0.581759 8.74716C0.391315 8.54128 0.286133 8.2755 0.286133 8.00016C0.286133 7.72482 0.391315 7.45904 0.581759 7.25316L3.70676 3.87816C3.80908 3.76729 3.93319 3.67691 4.07198 3.6122C4.21078 3.5475 4.36151 3.50974 4.51554 3.5011C4.66957 3.49246 4.82387 3.51311 4.96956 3.56185C5.11526 3.6106 5.2495 3.68648 5.36457 3.78516M16.3083 3.78516C16.4233 3.68694 16.5573 3.61144 16.7027 3.56296C16.8481 3.51447 17.0021 3.49397 17.1557 3.5026C17.3094 3.51124 17.4598 3.54885 17.5983 3.61329C17.7368 3.67773 17.8607 3.76773 17.963 3.87816L21.088 7.25316C21.2785 7.45904 21.3836 7.72482 21.3836 8.00016C21.3836 8.2755 21.2785 8.54128 21.088 8.74716L17.963 12.1222C17.7566 12.3453 17.4664 12.4807 17.1561 12.4984C16.8457 12.5161 16.5408 12.4148 16.3083 12.2167C16.0758 12.0185 15.9349 11.7399 15.9164 11.442C15.8979 11.1441 16.0035 10.8513 16.2099 10.6282L18.6396 8.00016L16.2083 5.37216C16.0024 5.14908 15.8971 4.85666 15.9155 4.55911C15.934 4.26155 16.0763 3.9832 16.3083 3.78516Z" fill="currentColor"/>
                  </svg>
                </i>
                <span class="my-auto flex h-fit text-lg font-semibold uppercase leading-none text-slate-900 font-jet lg:text-2xl">{{ inDepth.syntax }}%</span>
              </div>
              <div v-if="inDepth.projects !== 'na'" class="z-10 flex rounded-full bg-white px-4 py-2 space-x-3">
                <i class="my-auto flex h-4 w-4 text-slate-900 lg:h-5 lg:w-5">
                  <svg viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M16 0C16.5304 0 17.0391 0.210714 17.4142 0.585786C17.7893 0.960859 18 1.46957 18 2V14C18 14.5304 17.7893 15.0391 17.4142 15.4142C17.0391 15.7893 16.5304 16 16 16H2C1.46957 16 0.960859 15.7893 0.585786 15.4142C0.210714 15.0391 0 14.5304 0 14V2C0 1.46957 0.210714 0.960859 0.585786 0.585786C0.960859 0.210714 1.46957 0 2 0H16ZM16 6H2V13C2.00003 13.2449 2.08996 13.4813 2.25272 13.6644C2.41547 13.8474 2.63975 13.9643 2.883 13.993L3 14H15C15.2449 14 15.4813 13.91 15.6644 13.7473C15.8474 13.5845 15.9643 13.3603 15.993 13.117L16 13V6ZM3 2C2.73478 2 2.48043 2.10536 2.29289 2.29289C2.10536 2.48043 2 2.73478 2 3C2 3.26522 2.10536 3.51957 2.29289 3.70711C2.48043 3.89464 2.73478 4 3 4C3.26522 4 3.51957 3.89464 3.70711 3.70711C3.89464 3.51957 4 3.26522 4 3C4 2.73478 3.89464 2.48043 3.70711 2.29289C3.51957 2.10536 3.26522 2 3 2ZM6 2C5.73478 2 5.48043 2.10536 5.29289 2.29289C5.10536 2.48043 5 2.73478 5 3C5 3.26522 5.10536 3.51957 5.29289 3.70711C5.48043 3.89464 5.73478 4 6 4C6.26522 4 6.51957 3.89464 6.70711 3.70711C6.89464 3.51957 7 3.26522 7 3C7 2.73478 6.89464 2.48043 6.70711 2.29289C6.51957 2.10536 6.26522 2 6 2ZM9 2C8.73478 2 8.48043 2.10536 8.29289 2.29289C8.10536 2.48043 8 2.73478 8 3C8 3.26522 8.10536 3.51957 8.29289 3.70711C8.48043 3.89464 8.73478 4 9 4C9.26522 4 9.51957 3.89464 9.70711 3.70711C9.89464 3.51957 10 3.26522 10 3C10 2.73478 9.89464 2.48043 9.70711 2.29289C9.51957 2.10536 9.26522 2 9 2Z"
                      fill="currentColor"
                    />
                  </svg>
                </i>
                <span class="my-auto flex h-fit font-semibold uppercase leading-none text-slate-900 font-jet lg:text-2xl">
                  {{ inDepth.projects }}
                </span>
              </div>
            </div>
          </div>
        </div>

        <div class="rounded-3xl bg-white p-4 text-sm font-semibold text-slate-900 font-jet lg:p-6 lg:text-xl" v-html="deeper"/>
      </div>

      <div class="absolute top-1 left-1 h-full w-full rounded-3xl bg-slate-800 "/>
    </div>
  </div>
  <div class="fixed top-0 left-0 z-40 h-full w-full bg-slate-900 bg-opacity-40 animate__animated animate__fastest animate__fadeIn" @click="$emit('quit')"/>
</template>

<script setup>
import {computed} from 'vue'
const props = defineProps(['inDepth'])
const emits = defineEmits(['quit'])
function formatTime(hours){
  if (hours < 72){
    return `${hours} h`; // Less than 72 hours
  } else if (hours < 8760){ // 365 days
    const days = Math.round(hours / 24);
    return `${days} days`;
  } else if (hours < 105120){ // 12 months
    const months = Math.round(hours / (24 * 365 / 12));
    return `${months} months`;
  } else {
    const years = Math.round(hours / (24 * 365));
    return `${years} years`;
  }
}

//convert \n to <br> in in_dept
const deeper = computed(() => {
  return props.inDepth.in_depth.replace(/\n/g, '<br>')
})
</script>